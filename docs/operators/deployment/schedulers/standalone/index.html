<!DOCTYPE html><html lang="en-us"><head><link rel="shortcut icon" type="image/png" sizes="16x16" href="https://apache.github.io/incubator-heron/img/favicon-16x16.png"><link rel="shortcut icon" type="image/png" sizes="32x32" href="https://apache.github.io/incubator-heron/img/favicon-32x32.png"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Hugo 0.30.2" /><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Heron"><meta property="og:image" content="/img/logo54x54.png"><meta property="og:url" content="https://apache.github.io/incubator-heron"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@heronstreaming"><meta name="twitter:title" content="Heron"><meta name="twitter:image" content="/img/HeronTextLogo.png"><meta property="og:site_name" content="Heron standalone"><meta property="og:url" content="/docs/operators/deployment/schedulers/standalone/"><meta property="og:description" content=""><meta name="twitter:description" content=""><title>Heron Documentation - Heron standalone</title><link rel="stylesheet" href="https://apache.github.io/incubator-heron/css/font-awesome.min.css"><link rel="stylesheet" href="https://apache.github.io/incubator-heron/css/style.css"><script type="text/javascript">
var shiftWindow = function() { scrollBy(0, -100) };
window.addEventListener("hashchange", shiftWindow);
function load() { if (window.location.hash) shiftWindow(); }
</script></head><body class="body"><main class="main"><nav class="hn-top-navbar navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="hn-navbar-container container-fluid"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#hn-navbar" aria-controls="hn-navbar" aria-expanded="false"><span class="sr-only"><Toggle>navigation</Toggle></span><i class="hn-toggle-button fa fa-bars"></i></button><a class="hn-navbar-logo navbar-brand" href="https://apache.github.io/incubator-heron/"><img class="pull-left" src="https://apache.github.io/incubator-heron/img/HeronTextLogo-small.png"></a></div><div id="hn-navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="https://apache.github.io/incubator-heron/docs/getting-started">Docs</a></li><li><a href="https://apache.github.io/incubator-heron/docs/resources">Resources</a></li><li><a href="https://apache.github.io/incubator-heron/docs/contributors/community">Community</a></li><li><a href="https://github.com/twitter/heron">GitHub</a></li><li><a href="https://groups.google.com/forum/#!forum/heron-users">Mailing List</a></li><li><a class="nav-icon" href="https://twitter.com/heronstreaming"><i class="fa fa-twitter"></i></a></li></ul></div></div></nav><div class="hn-main"><div class="container"><div class="row"><aside class="hn-sidebar hidden-xs hidden-sm col-md-4 col-lg-2"><nav class="hn-sidebar-nav"><div id="hn-accordion" class="panel-group" role="tablist" aria-multiselectable="true"><div class="panel panel-default"><section id="getting-started" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-getting-started" aria-labelledby="getting-started"><i class="fa fa-caret-right"></i>Getting Started</a></h4></section><div id="collapse-getting-started" class="panel-collapse collapse" aria-labelledby="getting-started"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/getting-started">Local (Single Node)</a></li><li><a href="https://apache.github.io/incubator-heron/docs/migrate-storm-to-heron">Migrate Storm Topologies</a></li><li><a href="https://apache.github.io/incubator-heron/docs/getting-started-troubleshooting">Troubleshooting Guide</a></li></ul></div></div></div><div class="panel panel-default"><section id="deployment" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-deployment" aria-labelledby="deployment"><i class="fa fa-caret-right"></i>Deployment</a></h4></section><div id="collapse-deployment" class="panel-collapse collapse" aria-labelledby="deployment"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment">Overview</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/configuration">Configuration</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/heron-api-server">The Heron API server</a></li></ul></div></div></div><div class="panel panel-default"><section id="topology-development-apis" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-topology-development-apis" aria-labelledby="topology-development-apis"><i class="fa fa-caret-right"></i>Topology development APIs</a></h4></section><div id="collapse-topology-development-apis" class="panel-collapse collapse" aria-labelledby="topology-development-apis"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/developers/java/streamlet-api">The Heron Streamlet API for Java</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/java/eco-api">The Heron ECO API for Java</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/java/topologies">The Heron Topology API for Java</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/python/topologies">The Heron Topology API for Python</a></li></ul></div></div></div><div class="panel panel-default"><section id="client-api-docs" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-client-api-docs" aria-labelledby="client-api-docs"><i class="fa fa-caret-right"></i>Client API docs</a></h4></section><div id="collapse-client-api-docs" class="panel-collapse collapse" aria-labelledby="client-api-docs"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/api/java">Java</a></li><li><a href="https://apache.github.io/incubator-heron/api/python">Python</a></li></ul></div></div></div><div class="panel panel-default"><section id="guides" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-guides" aria-labelledby="guides"><i class="fa fa-caret-right"></i>Guides</a></h4></section><div id="collapse-guides" class="panel-collapse collapse" aria-labelledby="guides"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/developers/java/effectively-once">Effectively-once Java topologies</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/python/topologies">Python Topologies</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/data-model">Heron Data Model</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/serialization">Tuple Serialization</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/ui-guide">Heron UI Guide</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/tuning">Tuning Guide</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/packing/ffdpacking">Packing Algorithms</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/simulator-mode">Simulator Mode</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/troubleshooting">Troubleshooting Guide</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-concepts" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-concepts" aria-labelledby="heron-concepts"><i class="fa fa-caret-right"></i>Heron Concepts</a></h4></section><div id="collapse-heron-concepts" class="panel-collapse collapse" aria-labelledby="heron-concepts"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/concepts/design-goals">Heron Design Goals</a></li><li><a href="https://apache.github.io/incubator-heron/docs/concepts/topologies">Heron Topologies</a></li><li><a href="https://apache.github.io/incubator-heron/docs/concepts/streamlet-api">Heron Streamlet API</a></li><li><a href="https://apache.github.io/incubator-heron/docs/concepts/architecture">Heron Architecture</a></li><li><a href="https://apache.github.io/incubator-heron/docs/concepts/delivery-semantics">Heron Delivery Semantics</a></li></ul></div></div></div><div class="panel panel-default"><section id="state-managers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-state-managers" aria-labelledby="state-managers"><i class="fa fa-caret-right"></i>State Managers</a></h4></section><div id="collapse-state-managers" class="panel-collapse collapse" aria-labelledby="state-managers"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/statemanagers/zookeeper">Zookeeper</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/statemanagers/localfs">Local FS</a></li></ul></div></div></div><div class="panel panel-default"><section id="uploaders" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-uploaders" aria-labelledby="uploaders"><i class="fa fa-caret-right"></i>Uploaders</a></h4></section><div id="collapse-uploaders" class="panel-collapse collapse" aria-labelledby="uploaders"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/uploaders/localfs">Local FS</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/uploaders/hdfs">HDFS</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/uploaders/http">HTTP</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/uploaders/s3">Amazon S3</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/uploaders/scp">Secure Copy (SCP)</a></li></ul></div></div></div><div class="panel panel-default"><section id="schedulers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-schedulers" aria-labelledby="schedulers"><i class="fa fa-caret-right"></i>Schedulers</a></h4></section><div id="collapse-schedulers" class="panel-collapse collapse" aria-labelledby="schedulers"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/kubernetes">Kubernetes by Hand</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/kubernetes-helm">Kubernetes with Helm</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/aurora">Aurora Cluster</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/standalone">Multi-node standalone cluster</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/nomad">Nomad</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/local">Local Cluster</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/mesos-local-mac">Mesos Cluster Locally</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/slurm">Slurm Cluster</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/deployment/schedulers/yarn">YARN Cluster</a></li></ul></div></div></div><div class="panel panel-default"><section id="cluster-configuration" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-cluster-configuration" aria-labelledby="cluster-configuration"><i class="fa fa-caret-right"></i>Cluster Configuration</a></h4></section><div id="collapse-cluster-configuration" class="panel-collapse collapse" aria-labelledby="cluster-configuration"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/operators/configuration/config-intro">Overview</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/configuration/system">System-Level</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/configuration/instance">Heron Instance</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/configuration/metrics-manager">Metrics Manager</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/configuration/stmgr">Stream Manager</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/configuration/tmaster">Topology Master</a></li></ul></div></div></div><div class="panel panel-default"><section id="observability" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-observability" aria-labelledby="observability"><i class="fa fa-caret-right"></i>Observability</a></h4></section><div id="collapse-observability" class="panel-collapse collapse" aria-labelledby="observability"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/operators/observability/prometheus">Prometheus</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/observability/graphite">Graphite</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/observability/scribe">Scribe</a></li></ul></div></div></div><div class="panel panel-default"><section id="user-manuals" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-user-manuals" aria-labelledby="user-manuals"><i class="fa fa-caret-right"></i>User Manuals</a></h4></section><div id="collapse-user-manuals" class="panel-collapse collapse" aria-labelledby="user-manuals"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/operators/heron-cli">Heron Client</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/heron-explorer">Heron Explorer</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/heron-tracker-api">Heron Tracker REST API</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/heron-tracker">Heron Tracker Runbook</a></li><li><a href="https://apache.github.io/incubator-heron/docs/operators/heron-ui">Heron UI Runbook</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-developers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-developers" aria-labelledby="heron-developers"><i class="fa fa-caret-right"></i>Heron Developers</a></h4></section><div id="collapse-heron-developers" class="panel-collapse collapse" aria-labelledby="heron-developers"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/developers/compiling/compiling">Compiling</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/compiling/linux">Compiling on Linux</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/compiling/mac">Compiling on Mac OS X</a></li><li><a href="https://apache.github.io/incubator-heron/docs/developers/compiling/docker">Compiling With Docker</a></li><li><a href="https://apache.github.io/incubator-heron/docs/contributors/testing">Running Tests</a></li><li><a href="https://apache.github.io/incubator-heron/docs/contributors/codebase">Code Organization</a></li></ul></div></div></div><div class="panel panel-default"><section id="extending-heron" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-extending-heron" aria-labelledby="extending-heron"><i class="fa fa-caret-right"></i>Extending Heron</a></h4></section><div id="collapse-extending-heron" class="panel-collapse collapse" aria-labelledby="extending-heron"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/contributors/custom-scheduler">Custom Scheduler</a></li><li><a href="https://apache.github.io/incubator-heron/docs/contributors/custom-metrics-sink">Custom Metrics Sink</a></li></ul></div></div></div><div class="panel panel-default"><section id="heron-resources" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-heron-resources" aria-labelledby="heron-resources"><i class="fa fa-caret-right"></i>Heron Resources</a></h4></section><div id="collapse-heron-resources" class="panel-collapse collapse" aria-labelledby="heron-resources"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/resources">Heron Resources</a></li></ul></div></div></div><div class="panel panel-default"><section id="contributors" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-contributors" aria-labelledby="contributors"><i class="fa fa-caret-right"></i>Contributors</a></h4></section><div id="collapse-contributors" class="panel-collapse collapse" aria-labelledby="contributors"><div class="panel-body"><ul><li><a href="https://apache.github.io/incubator-heron/docs/contributors/community">Community</a></li><li><a href="https://apache.github.io/incubator-heron/docs/contributors/governance">Governance</a></li></ul></div></div></div></div></nav></aside><section class="hn-docs-main col-xs-12 col-sm-12 col-md-8 col-lg-10 col-md-offset-4 col-lg-offset-2"><header class="hn-docs-header page-header"><h1 class="hn-docs-title">Heron standalone</h1><div class="hn-docs-description"></div></header><article class="hn-docs-content">

<p>Heron enables you to easily run a multi-node cluster in <strong>standalone mode</strong>. The difference between standalone mode and <a href="../local">local mode</a> for Heron is that standalone mode involves running multiple compute nodes&mdash;using <a href="https://www.hashicorp.com/">Hashicorp</a>&rsquo;s <a href="https://www.nomadproject.io/">Nomad</a> as a scheduler&mdash;rather than just one.</p>

<h2 id="installation">Installation</h2>

<p>You can use Heron in standalone mode using the <code>heron-admin</code> CLI tool, which can be installed using the instructions <a href="../../../../getting-started">here</a>.</p>

<h2 id="requirements">Requirements</h2>

<p>In order to run Heron in standalone mode, you&rsquo;ll need to run a <a href="https://zookeeper.apache.org">ZooKeeper</a> cluster. You will also need to be able to ssh into all the nodes that you want to have in your standalone cluster from the node that your are setting up the cluster.</p>

<h2 id="configuration">Configuration</h2>

<p>Once you have the <code>heron-admin</code> CLI tool installed, you need to provide a list of hosts for both the Heron cluster itself and for <a href="https://zookeeper.apache.org">ZooKeeper</a>.</p>

<p>You can easily do this by running the following command:</p>
$ heron-admin standalone set
<p>That will open up an <code>inventory.yaml</code> file in whichever editor is specified in your <code>EDITOR</code> environment variable. The default is <a href="http://www.vim.org/">Vim</a>. That YAML file looks like this:</p>
cluster:
- 127.0.0.1
zookeepers:
- 127.0.0.1
<p>You can modify the file to include all hosts for your standalone cluster and for ZooKeeper. Remember you need to be able to ssh into all the nodes listed in the cluster section. Once you&rsquo;ve added the lists of hosts for the Heron standalone cluster and ZooKeeper and saved the file, you can move on to <a href="#starting-and-stopping-the-cluster">starting the cluster</a>.</p>

<blockquote>
<p>To run Heron in standalone mode locally on your laptop, use the defaults that are already provided in the <code>inventory.yaml</code> file.</p>
</blockquote>

<h2 id="starting-and-stopping-the-cluster">Starting and stopping the cluster</h2>

<p>To start Heron in standalone mode once the host configuration has been applied:</p>
$ heron-admin standalone cluster start
<p>You should see output like this:</p>
[2018-01-22 10:37:06 -0800] [INFO]: Roles:
[2018-01-22 10:37:06 -0800] [INFO]:  - Master Servers: ['127.0.0.1']
[2018-01-22 10:37:06 -0800] [INFO]:  - Slave Servers: ['127.0.0.1']
[2018-01-22 10:37:06 -0800] [INFO]:  - Zookeeper Servers: ['127.0.0.1']
[2018-01-22 10:37:06 -0800] [INFO]: Updating config files...
[2018-01-22 10:37:06 -0800] [INFO]: Starting master on 127.0.0.1
[2018-01-22 10:37:06 -0800] [INFO]: Done starting masters
[2018-01-22 10:37:06 -0800] [INFO]: Starting slave on 127.0.0.1
[2018-01-22 10:37:06 -0800] [INFO]: Done starting slaves
[2018-01-22 10:37:06 -0800] [INFO]: Waiting for cluster to come up... 0
[2018-01-22 10:37:08 -0800] [INFO]: Starting Heron API Server on 127.0.0.1
[2018-01-22 10:37:08 -0800] [INFO]: Waiting for apiserver to come up... 0
[2018-01-22 10:37:09 -0800] [INFO]: Waiting for apiserver to come up... 1
[2018-01-22 10:37:16 -0800] [INFO]: Done starting Heron API Server
[2018-01-22 10:37:16 -0800] [INFO]: Starting Heron Tools on 127.0.0.1
[2018-01-22 10:37:16 -0800] [INFO]: Waiting for apiserver to come up... 0
[2018-01-22 10:37:17 -0800] [INFO]: Done starting Heron Tools
[2018-01-22 10:37:17 -0800] [INFO]: Heron standalone cluster complete!
<p>If you see the <code>Heron standalone cluster complete!</code> message, that means that the cluster is ready for you to <a href="#submitting-a-topology">submit</a> and manage topologies.</p>

<p>You can stop the cluster at any time using the <code>stop</code> command:</p>
$ heron-admin standalone cluster stop
<p>You will be prompted to confirm that you want to stop the cluster by typing <strong>yes</strong> or <strong>y</strong> (or <strong>no</strong> or <strong>n</strong> if you don&rsquo;t want to). If you enter <strong>yes</strong> or <strong>y</strong> and press <strong>Enter</strong>, all Heron-related jobs will be de-scheduled on Nomad.</p>

<h2 id="fetching-info-about-your-standalone-cluster">Fetching info about your standalone cluster</h2>

<p>At any time, you can retrieve information about your standalone cluster by running:</p>
$ heron-admin standalone info
<p>This will return a JSON string containing a list of hosts for Heron and ZooKeeper as well as URLs for the <a href="../../../heron-api-server">Heron API server</a>, <a href="../../../heron-ui">Heron UI</a>, and <a href="../../../heron-tracker">Heron Tracker</a>. Here is a cluster info JSON string if all defaults are retained:</p>
{
  "numNodes": 1,
  "nodes": [
    "127.0.0.1"
  ],
  "roles": {
    "masters": [
      "127.0.0.1"
    ],
    "slaves": [
      "127.0.0.1"
    ],
    "zookeepers": [
      "127.0.0.1"
    ]
  },
  "urls": {
    "serviceUrl": "http://127.0.0.1:9000",
    "heronUi": "http://127.0.0.1:8889",
    "heronTracker": "http://127.0.0.1:8888"
  }
}
<p>You can also get more specific bits of info using the <code>get</code> command:</p>
# Heron Tracker URL
$ heron-admin standalone get heron-tracker-url

# Heron UI URL
$ heron-admin standalone get heron-ui-url

# Heron cluster service URL
$ heron-admin standalone get service-url
<h2 id="setting-the-service-url">Setting the service URL</h2>

<p>Once your standalone cluster is running, there&rsquo;s one final step before you can interact with the cluster: you need to specify the service URL for the <a href="../../../heron-api-server">Heron API server</a> for the standalone cluster. You can fetch that URL in two different ways:</p>
# Using the "get" command
$ heron-admin standalone get service-url

# Using the "info" command
$ heron-admin standalone info | jq .urls.serviceUrl | tr -d '"'
<p>Once you have the URL, you can use the <code>heron config</code> command to set the service URL:</p>
$ heron config standalone set service_url SERVICE_URL
<p>Here are some more convenient ways to set the service URL:</p>
# Using the "get" command
$ heron config standalone set service_url \
  $(heron-admin standalone get service-url)

# Using the "info" command
$ heron config standalone set service_url \
  $(heron-admin standalone info | jq .urls.serviceUrl | tr -d '"')
<p>If you&rsquo;re running a standalone cluster locally on your laptop, the service URL will always be <code>http://localhost:9000</code>:</p>
$ heron config standalone set service_url http://localhost:9000
<h2 id="submitting-a-topology">Submitting a topology</h2>

<p>Once your standalone cluster is up and running and you&rsquo;ve set the service URL for the <a href="../../../heron-cli"><code>heron</code> CLI tool</a>, you can submit and manage topologies by specifying the <code>standalone</code> cluster. Here&rsquo;s an example topology submission command:</p>
$ heron submit standalone \
  ~/.heron/examples/heron-streamlet-examples.jar \
  com.twitter.heron.examples.streamlet.WindowedWordCountTopology \
  WindowedWordCount
<p>You can also specify the service url as part of the submission command:</p>
$ heron submit standalone \
  --service-url http://localhost:9000 \
  ~/.heron/examples/heron-streamlet-examples.jar \
  com.twitter.heron.examples.streamlet.WindowedWordCountTopology \
  WindowedWordCount
<p>Once the topology has been submitted, it can be deactivated, killed, updated, and so on, just like topologies on any other scheduler.</p>

<h2 id="managing-nomad">Managing Nomad</h2>

<p>Heron standalone uses <a href="https://www.nomadproject.io/">Nomad</a> as a scheduler. For the most part, you shouldn&rsquo;t need to interact with Nomad when managing your Heron standalone cluster. If you do need to manage Nomad directly, however, you can do so using the <code>heron-nomad</code> executable, which is installed at <code>~/.heron/bin/heron-nomad</code>. That executable is essentially an alias for the <code>nomad</code> CLI tool. You can find documentation in the <a href="https://www.nomadproject.io/docs/commands/index.html">official Nomad docs</a>.</p>

<p>You can also access the <a href="https://www.nomadproject.io/guides/ui.html">Nomad Web UI</a> on port 4646 of any master node in the Heron cluster. You can see a list of master nodes by running <code>heron-admin standalone info</code>. If you&rsquo;re running a standalone cluster locally on your machine, you can access the Nomad UI at <code>localhost:4646</code>.</p>

<h2 id="debugging-help">Debugging Help</h2>

<p>The locations of the logs for the Nomad Server (master node) and Nomad Clients (slave nodes) are located at &lsquo;/tmp/nomad_server_log&rsquo; and &lsquo;/tmp/nomad_client.log&rsquo; respectively. Please look through these logs to see if there was a error setting up the Nomad cluster</p>

<h3 id="common-problems">Common Problems</h3>

<p>If you see the following in &lsquo;/tmp/nomad_server_log&rsquo;</p>
Error starting agent: Failed to start Consul server: Failed to start lan serf: Failed to parse advertise address!
<p>The Nomad server cannot determine the network address to advertise itself on.  You will need to manually set that address. You can do that by modifying the configuration file:</p>

<p>~/.heron/conf/standalone/resources/master.hcl</p>

<p>You will need to add a stanza like:</p>

<p>advertise {
  # Defaults to the node&rsquo;s hostname. If the hostname resolves to a loopback
  # address you must manually configure advertise addresses.
  http = &ldquo;1.2.3.4&rdquo;
  rpc  = &ldquo;1.2.3.4&rdquo;
  serf = &ldquo;1.2.3.4:5648&rdquo; # non-default ports may be specified
}</p>

<p>Please reference:</p>

<p><a href="https://www.nomadproject.io/docs/agent/configuration/index.html">https://www.nomadproject.io/docs/agent/configuration/index.html</a></p>

<p>You can then stop the cluster and restart.</p>
</article></section></div></div></div></main><script src="https://code.jquery.com/jquery-2.2.1.min.js"></script><script src="https://apache.github.io/incubator-heron/js/bootstrap.js"></script><script src="https://apache.github.io/incubator-heron/js/jquery.scrollTo.js"></script><script src="https://apache.github.io/incubator-heron/js/app.min.js"></script><script type="text/javascript">
$('pre code').each(function() {
  console.log(this);
  this.innerHTML = this.innerHTML.replace(/\$\s/g, function(matched) {
    return `<span class=\"clp\">${matched}</span>`;
  });
});
</script></body></html>